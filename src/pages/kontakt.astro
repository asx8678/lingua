---
import MainLayout from "../layouts/MainLayout.astro";
import { BRAND_NAME, CONTACT_EMAIL, CONTACT_PHONE, BUSINESS_ADDRESS, isTodo } from "../config/site";

const title = `Kontakt – szkoła angielskiego Legionowo | ${BRAND_NAME}`;
const description =
  "Skontaktuj się i umów lekcję próbną w szkole Lingua Legionowo. Oferujemy kursy stacjonarne i online. Odpowiadamy szybko.";

const hasEmail = !isTodo(CONTACT_EMAIL);
const hasPhone = !isTodo(CONTACT_PHONE);
const formAction = hasEmail ? `mailto:${CONTACT_EMAIL}` : "#";
---

<MainLayout title={title} description={description}>
  <section class="hero-bg">
    <div class="container-site py-16 sm:py-20">
      <div class="grid gap-10 lg:grid-cols-2 lg:items-start">
        <div>
          <span class="kicker">Kontakt</span>
          <h1 class="mt-6">Skontaktuj się z nami — Lingua Legionowo</h1>
          <p class="mt-6 max-w-2xl text-lg">
            Napisz kilka słów o swoim poziomie i celu. Zaproponujemy plan nauki i terminy —
            stacjonarnie w Legionowie lub online.
          </p>

          <div class="mt-10 grid gap-4 sm:grid-cols-2">
            <div class="card p-6">
              <div class="text-xs font-bold uppercase tracking-widest text-slate-500">E-mail</div>
              <div class="mt-3 text-base font-extrabold text-primary">
                {hasEmail ? (
                  <a class="no-underline" href={`mailto:${CONTACT_EMAIL}`}>{CONTACT_EMAIL}</a>
                ) : (
                  <span>{CONTACT_EMAIL}</span>
                )}
              </div>
              <p class="mt-2 text-sm">Odpowiadamy najszybciej mailowo.</p>
            </div>

            <div class="card p-6">
              <div class="text-xs font-bold uppercase tracking-widest text-slate-500">Telefon</div>
              <div class="mt-3 text-base font-extrabold text-primary">
                {hasPhone ? (
                  <a class="no-underline" href={`tel:${CONTACT_PHONE}`}>{CONTACT_PHONE}</a>
                ) : (
                  <span>{CONTACT_PHONE}</span>
                )}
              </div>
              <p class="mt-2 text-sm">Jeśli nie odbierzemy, oddzwonimy.</p>
            </div>
          </div>

          <div class="mt-6 card p-6">
              <div class="text-xs font-bold uppercase tracking-widest text-slate-500">Adres</div>
              <div class="mt-3 text-base font-extrabold text-slate-900">
                {BUSINESS_ADDRESS}
              </div>
              <p class="mt-2 text-sm">Szkoła Lingua znajduje się w centrum Legionowa.</p>
            </div>
          <p class="mt-2 text-sm text-slate-500">
            Zobacz też
            <a class="font-bold text-primary no-underline hover:underline" href="/angielski-stacjonarnie">zajęcia stacjonarne</a>,
            <a class="font-bold text-primary no-underline hover:underline" href="/angielski-online">lekcje online</a>
            i
            <a class="font-bold text-primary no-underline hover:underline" href="/cennik">cennik</a>.
          </p>
        </div>

        <div class="card p-6">
          <h2 class="text-lg font-extrabold text-slate-900">Formularz kontaktowy</h2>
          <p class="mt-2 text-sm text-slate-600">Pola oznaczone * są wymagane.</p>

          <form
            method="post"
            action={formAction}
            enctype="text/plain"
            class="mt-6 space-y-4"
            aria-label="Formularz kontaktowy"
          >
            <div>
              <label for="name" class="text-sm font-bold text-slate-900">Imię i nazwisko *</label>
              <input
                id="name"
                name="name"
                autocomplete="name"
                required
                class="mt-1 w-full rounded-xl border-slate-300 bg-white focus:border-primary focus:ring-primary"
              />
            </div>

            <div>
              <label for="email" class="text-sm font-bold text-slate-900">E-mail *</label>
              <input
                id="email"
                name="email"
                type="email"
                autocomplete="email"
                required
                class="mt-1 w-full rounded-xl border-slate-300 bg-white focus:border-primary focus:ring-primary"
              />
            </div>

            <div>
              <label for="phone" class="text-sm font-bold text-slate-900">Telefon (opcjonalnie)</label>
              <input
                id="phone"
                name="phone"
                type="tel"
                autocomplete="tel"
                class="mt-1 w-full rounded-xl border-slate-300 bg-white focus:border-primary focus:ring-primary"
              />
            </div>

            <div>
              <label for="message" class="text-sm font-bold text-slate-900">Wiadomość *</label>
              <textarea
                id="message"
                name="message"
                required
                class="mt-1 min-h-[120px] w-full rounded-xl border-slate-300 bg-white focus:border-primary focus:ring-primary"
                placeholder="Np. poziom, cel, preferowane dni/godziny…"
              ></textarea>
            </div>

            <div class="flex items-start gap-3 text-sm text-slate-600">
              <input
                id="consent"
                name="consent"
                type="checkbox"
                required
                class="mt-1 h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary"
              />
              <label for="consent">
                Wyrażam zgodę na kontakt w sprawie kursu zgodnie z
                <a class="font-bold text-primary no-underline hover:underline" href="/privacy">polityką prywatności</a>.
              </label>
            </div>

            <button class="btn btn-primary w-full" type="submit">Wyślij wiadomość</button>

            {!hasEmail && (
              <p class="text-xs text-amber-600">
                Uzupełnij CONTACT_EMAIL w konfiguracji, aby formularz działał. Na razie użyj danych kontaktowych powyżej.
              </p>
            )}
          </form>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container-site">
      <h2>Nasza lokalizacja</h2>
      <p class="mt-4 max-w-3xl">
        Szkoła Lingua znajduje się w centrum Legionowa, z łatwym dojazdem komunikacją miejską i dostępnym parkingiem w okolicy.
      </p>
      <div class="mt-8 overflow-hidden rounded-2xl border border-slate-200 shadow-soft">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2432.8!2d20.9257!3d52.4012!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x471eca5e3c5c0e1d%3A0x0!2sMiko%C5%82aja%20Kopernika%209%2C%2005-120%20Legionowo!5e0!3m2!1spl!2spl!4v1"
          width="100%"
          height="400"
          style="border:0;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          title="Lokalizacja szkoły Lingua Legionowo"
        ></iframe>
      </div>
      <div class="mt-6 flex flex-wrap items-center gap-4">
        <div class="text-sm text-slate-600">
          <strong class="text-slate-900">{BUSINESS_ADDRESS}</strong>
        </div>
        <a
          href="https://www.google.com/maps/search/?api=1&query=Miko%C5%82aja+Kopernika+9%2C+05-120+Legionowo"
          target="_blank"
          rel="noopener noreferrer"
          class="btn btn-secondary text-sm"
        >
          Otwórz w Google Maps
        </a>
      </div>
    </div>
  </section>
</MainLayout>
