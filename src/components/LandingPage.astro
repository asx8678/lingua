---
import MainLayout from "../layouts/MainLayout.astro";
import CTASection from "./CTASection.astro";
import FaqSection from "./FaqSection.astro";
import {
  BRAND_NAME,
  generateBreadcrumbSchema,
  SITE_URL,
} from "../config/site";
import type { LandingPageData } from "../data/landing-pages";

interface Props {
  data: LandingPageData;
}

const { data } = Astro.props;
const fullTitle = `${data.title} | ${BRAND_NAME}`;

const faqJsonLd = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: data.faqs.map((item) => ({
    "@type": "Question",
    name: item.question,
    acceptedAnswer: {
      "@type": "Answer",
      text: item.answer,
    },
  })),
};

const breadcrumbSchema = generateBreadcrumbSchema([
  { name: "Strona główna", url: "/" },
  { name: "Oferta", url: "/oferta" },
  { name: data.kicker },
]);

const courseJsonLd = {
  "@context": "https://schema.org",
  "@type": "Course",
  name: data.h1,
  description: data.description,
  provider: {
    "@type": "Organization",
    name: BRAND_NAME,
    url: SITE_URL,
  },
};

---

<MainLayout
  title={fullTitle}
  description={data.description}
  canonical={data.canonical}
  structuredData={[faqJsonLd, breadcrumbSchema, courseJsonLd]}
>
  <section class="hero-bg section-hero">
    <div class="container-site">
      <div class="grid gap-10 lg:grid-cols-2 lg:items-center">
        <div>
          <span class="text-base font-semibold uppercase tracking-wider text-primary">{data.kicker}</span>
          <h1 class="mt-5">{data.h1}</h1>
          <p class="mt-6 max-w-2xl text-lg text-slate-600">
            {data.intro}
          </p>
          <div class="mt-8">
            <a class="btn btn-primary" href="/cennik">Zobacz cennik</a>
          </div>
        </div>

        <div class="relative hidden lg:block">
          <img
            src="/images/hero.svg"
            alt={data.h1}
            loading="eager"
            decoding="async"
            fetchpriority="high"
            width="600"
            height="400"
            class="w-full rounded-2xl border border-slate-200/60 shadow-soft"
          />
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container-site">
      <h2>Dlaczego {BRAND_NAME}?</h2>
      <p class="mt-4 max-w-3xl text-slate-600">
        Jesteśmy lokalną szkołą językową, która rozumie potrzeby mieszkańców Legionowa. Bez dojazdów
        do Warszawy — ucz się blisko domu.
      </p>
      <div class="mt-10 grid gap-5 md:grid-cols-2">
        {
          data.benefits.map((item) => (
            <div class="card p-6">
              <h3 class="text-base font-bold text-slate-900">{item.title}</h3>
              <p class="mt-2 text-sm text-slate-600">{item.text}</p>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <section class="section section-muted">
    <div class="container-site">
      <h2>Nasza oferta</h2>
      <p class="mt-4 max-w-3xl text-slate-600">
        Wybierz formę nauki dopasowaną do swoich potrzeb i możliwości czasowych.
      </p>
      <div class="mt-10 grid gap-5 md:grid-cols-2">
        {
          data.offers.map((item) => (
            <a class="card p-6 no-underline group" href={item.href}>
              <h3 class="text-base font-bold text-slate-900">{item.title}</h3>
              <p class="mt-2 text-sm text-slate-600">{item.text}</p>
              <span class="mt-4 inline-flex text-sm font-semibold text-primary group-hover:gap-3 gap-2 transition-all duration-200">
                Dowiedz się więcej
                <span aria-hidden="true">→</span>
              </span>
            </a>
          ))
        }
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container-site">
      <div class="grid gap-10 lg:grid-cols-2 lg:items-start">
        <div>
          <h2>Dla kogo są nasze kursy?</h2>
          <p class="mt-4 text-slate-600">
            Prowadzimy zajęcia dla różnych grup wiekowych i na różnych poziomach zaawansowania.
          </p>
          <ul class="mt-6 space-y-3">
            {
              data.targetAudience.map((item) => (
                <li class="flex items-start gap-3 text-sm text-slate-600">
                  <span
                    class="mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary/60"
                    aria-hidden="true"
                  />
                  <span>
                    <strong class="text-slate-900">{item.label}</strong> — {item.description}
                  </span>
                </li>
              ))
            }
          </ul>
        </div>
        <div class="card p-6">
          <h3 class="text-base font-bold text-slate-900">{data.locationCard.title}</h3>
          <p class="mt-4 text-sm text-slate-600">
            {data.locationCard.intro}
          </p>
          <ul class="mt-4 space-y-2 text-sm text-slate-600">
            {data.locationCard.features.map((feature) => (
              <li class="flex items-start gap-2">
                <span class="mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary/60" aria-hidden="true" />
                <span>{feature}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </section>

  <FaqSection title={`${data.kicker} — pytania i odpowiedzi`} items={data.faqs} />

  <CTASection
    title={data.cta.title}
    description={data.cta.description}
    note={data.cta.note}
    variant={ctaVariant}
  />
</MainLayout>
