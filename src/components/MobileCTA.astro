---
/**
 * Mobile CTA Bar
 * Fixed bottom navigation bar for mobile devices
 */
import {
  CTA_PRIMARY_HREF,
  CTA_PRIMARY_LABEL,
  CTA_PRIMARY_LABEL_SHORT,
  CTA_PRIMARY_TARGET,
  CTA_PRIMARY_REL,
  CONTACT_PHONE,
} from "../config/site";

interface Props {
  phoneHref?: string;
  showPhone?: boolean;
}

const hasPhone = !!CONTACT_PHONE;
const { phoneHref = hasPhone ? `tel:${CONTACT_PHONE}` : "", showPhone = hasPhone } = Astro.props;

// Tailwind class constants
const btnPrimary = "inline-flex items-center justify-center gap-2 rounded-full px-6 py-3 text-sm font-bold transition-all duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary bg-primary text-white shadow-md hover:bg-primary-700 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 active:shadow-md";
const btnSecondary = "inline-flex items-center justify-center gap-2 rounded-full px-6 py-3 text-sm font-bold transition-all duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary border border-slate-200 bg-white text-slate-700 shadow-sm hover:border-primary/30 hover:text-primary hover:shadow-md hover:-translate-y-0.5 active:translate-y-0";
---

<div
  class="fixed inset-x-0 bottom-0 z-40 border-t border-slate-200 bg-white/95 backdrop-blur md:hidden"
  role="navigation"
  aria-label="Szybkie akcje"
>
  <div class="mx-auto w-full max-w-7xl px-6 py-3">
    <div class={`grid gap-2 ${showPhone ? "grid-cols-2" : "grid-cols-1"}`}>
      <a
        class={`${btnPrimary} w-full text-xs leading-snug sm:text-sm`}
        href={CTA_PRIMARY_HREF}
        target={CTA_PRIMARY_TARGET}
        rel={CTA_PRIMARY_REL}
        aria-label={CTA_PRIMARY_LABEL}
        data-track="cta_primary"
        data-track-label={CTA_PRIMARY_LABEL}
      >
        {CTA_PRIMARY_LABEL_SHORT}
      </a>
      {
        showPhone && phoneHref && (
          <a
            class={`${btnSecondary} w-full text-xs leading-snug sm:text-sm`}
            href={phoneHref}
            aria-label="Zadzwoń do nas"
          >
            <svg
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              />
            </svg>
            <span>Zadzwoń</span>
          </a>
        )
      }
    </div>
  </div>
</div>
