---
import { PRIMARY_CTA, getSecondaryCta, type CtaVariant } from "../config/site";

interface Props {
  title: string;
  description: string;
  variant?: CtaVariant;
  primaryLabel?: string;
  primaryHref?: string;
  primaryTarget?: string;
  primaryRel?: string;
  secondaryLabel?: string | null;
  secondaryHref?: string;
  secondaryTarget?: string;
  secondaryRel?: string;
  note?: string;
}

const {
  title,
  description,
  variant = "general",
  primaryLabel = "Kontakt",
  primaryHref = PRIMARY_CTA.href,
  primaryTarget = PRIMARY_CTA.target,
  primaryRel = PRIMARY_CTA.rel,
  secondaryLabel,
  secondaryHref,
  secondaryTarget,
  secondaryRel,
  note,
} = Astro.props;

const fallbackSecondary = getSecondaryCta(variant);
const resolvedSecondary =
  secondaryLabel === undefined && secondaryHref === undefined
    ? fallbackSecondary
    : secondaryLabel && secondaryHref
      ? { label: secondaryLabel, href: secondaryHref }
      : null;

---

<section class="section">
  <div class="container-site">
    <div class="card p-10 sm:p-12 lg:p-14 text-center relative overflow-hidden group">
      <div class="absolute inset-0 bg-gradient-to-br from-primary/[0.03] via-transparent to-transparent"></div>
      <div class="absolute -inset-4 bg-gradient-to-br from-primary/10 via-transparent to-transparent blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
      <div class="relative z-10">
        <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900">{title}</h2>
        <p class="mx-auto mt-4 max-w-2xl text-lg text-slate-600 leading-relaxed">{description}</p>
        {note && <p class="mt-3 text-sm text-slate-500">{note}</p>}
        <div class="mt-10 flex flex-wrap items-center justify-center gap-4">
          <a
            class="btn btn-primary text-base px-8 py-3 shadow-xl shadow-primary/30 hover:shadow-2xl hover:shadow-primary/40"
            href={primaryHref}
            target={primaryTarget}
            rel={primaryRel}
          >
            {primaryLabel}
          </a>
          {resolvedSecondary && (
            <a
              class="btn btn-secondary text-base px-8 py-3"
              href={resolvedSecondary.href}
              target={secondaryTarget}
              rel={secondaryRel}
            >
              {resolvedSecondary.label}
            </a>
          )}
        </div>
      </div>
    </div>
  </div>
</section>
